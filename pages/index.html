<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vesso - The Task Manager</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="stylesheet" href="/css/global.css">
</head>

<body>
    <div id="profile_visit">
        <button id="user_name" class="profile-button">
            <!-- <img src="image.jpg" id="user_image" alt="User Profile">  -->
        </button>
    </div>

    <div id="user_card" class="user-card">
        <div class="user-info">
            <!-- <img src="image.jpg" id="user_image" alt="User Profile"> -->
            <h5 id="user_name_label"></h5>
        </div>
        <!-- <button id="edit" class="profile-action-button">Edit</button> -->
        <button id="log_out" class="profile-action-button">Log out</button>
    </div>

    <div class="main-container">
        <div class="add-task-section">
            <button id="Add_New" class="button button-primary">Add New +</button>
        </div>

        <div id="add_task_form" class="task-form">
            <div class="form-group">
                <h4>Name of task</h4>
                <input id="task_name_form" type="text" placeholder="Give a name for your task">
            </div>

            <div class="form-group">
                <h4>Add description</h4>
                <input id="task_description_from" type="text" placeholder="Add a description">
            </div>

            <div class="form-actions">
                <button id="back" class="button">Back</button>
                <button id="add" class="button button-primary">Add</button>
            </div>
        </div>


        
        <div id="task_card_show_area"></div>




        <div class="recycle-button-container">
            <button class="button button-secondary" id="bin">Bin</button>
        </div>

    <script src="/js/logout.js"></script>
    <script src="/js/getUser.js"></script>
    <script src="/js/createTask.js"></script>
    <script src="/js/getAllTask.js"></script>
    <script>
        const profileButton = document.getElementById("user_name");
        const userCard = document.getElementById("user_card");

        profileButton.addEventListener("click", (e) => {
            e.stopPropagation();
            const isHidden = window.getComputedStyle(userCard).display === "none";
            userCard.style.display = isHidden ? "block" : "none";
        });

        document.addEventListener("click", (event) => {
            if (!userCard.contains(event.target) && !profileButton.contains(event.target)) {
                userCard.style.display = "none";
            }
        });
    </script>
    <script>
        // Make the Bin button behave like a link (keeps button markup but adds navigation)
        const binBtn = document.getElementById('bin');
        if (binBtn) {
            binBtn.addEventListener('click', (e) => {
                e.preventDefault();
                window.location.href = '/pages/bin.html';
            });
        }
    </script>

    <script>
        // Show/hide Add Task form
        const addNewBtn = document.getElementById('Add_New');
        const addTaskForm = document.getElementById('add_task_form');
        if (addNewBtn && addTaskForm) {
            addNewBtn.addEventListener('click', (e) => {
                e.preventDefault();
                addTaskForm.style.display = 'block';
                const firstInput = addTaskForm.querySelector('input');
                if (firstInput) firstInput.focus();
            });

            // Back button inside the form (first .button in .form-actions)
            const backBtn = addTaskForm.querySelector('.form-actions .button');
            if (backBtn) {
                backBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    addTaskForm.style.display = 'none';
                });
            }

            // Add button: simple local behavior (hide form). Replace with real submit later.
            const submitBtn = addTaskForm.querySelector('#add');
            if (submitBtn) {
                submitBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    // TODO: validate and send data to backend; currently just hide the form
                    addTaskForm.style.display = 'none';
                });
            }
        }
    </script>
</body>

</html>